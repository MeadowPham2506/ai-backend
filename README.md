# AI Backend üöÄ

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![Node.js](https://img.shields.io/badge/Node.js-18%2B-green.svg)](https://nodejs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.7%2B-blue.svg)](https://www.typescriptlang.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-blue.svg)](https://www.postgresql.org/)

## üìã T·ªïng quan d·ª± √°n

**AI Backend** l√† m·ªôt ·ª©ng d·ª•ng backend hi·ªán ƒë·∫°i ƒë∆∞·ª£c x√¢y d·ª±ng v·ªõi **Node.js**, **TypeScript**, **Express.js** v√† **Prisma ORM**. D·ª± √°n ƒë∆∞·ª£c thi·∫øt k·∫ø theo ki·∫øn tr√∫c **MVC** v·ªõi c·∫•u tr√∫c th∆∞ m·ª•c ƒë∆∞·ª£c t·ªï ch·ª©c r√µ r√†ng v√† s·ª≠ d·ª•ng **PostgreSQL** l√†m c∆° s·ªü d·ªØ li·ªáu ch√≠nh.

### ‚ú® T√≠nh nƒÉng ch√≠nh

- üîê **Authentication & Authorization** v·ªõi JWT
- üìä **RESTful API** v·ªõi c·∫•u tr√∫c r√µ r√†ng
- üõ°Ô∏è **Security** t√≠ch h·ª£p (Helmet, CORS, Rate Limiting)
- üìù **Database Management** v·ªõi Prisma ORM
- ÔøΩ **Docker** support cho PostgreSQL
- üö¶ **Process Management** v·ªõi PM2
- üìà **Logging** v√† monitoring
- üîÑ **Hot reload** trong development

## üõ†Ô∏è C√¥ng ngh·ªá s·ª≠ d·ª•ng

### Backend Framework & Runtime
- ![Node.js](https://img.shields.io/badge/Node.js-43853D?style=flat&logo=node.js&logoColor=white) **Node.js**: Runtime environment cho JavaScript
- ![TypeScript](https://img.shields.io/badge/TypeScript-007ACC?style=flat&logo=typescript&logoColor=white) **TypeScript**: Superset c·ªßa JavaScript v·ªõi type safety
- ![Express.js](https://img.shields.io/badge/Express.js-404D59?style=flat&logo=express&logoColor=white) **Express.js**: Web framework cho Node.js
- **ts-node**: TypeScript execution engine cho Node.js

### C∆° s·ªü d·ªØ li·ªáu & ORM
- ![PostgreSQL](https://img.shields.io/badge/PostgreSQL-316192?style=flat&logo=postgresql&logoColor=white) **PostgreSQL**: H·ªá qu·∫£n tr·ªã c∆° s·ªü d·ªØ li·ªáu quan h·ªá
- **Prisma**: Modern ORM cho TypeScript v√† Node.js
- ![Docker](https://img.shields.io/badge/Docker-2496ED?style=flat&logo=docker&logoColor=white) **Docker**: Container h√≥a PostgreSQL database

### Security & Middleware
- **Helmet**: B·∫£o m·∫≠t HTTP headers
- **CORS**: Cross-Origin Resource Sharing
- **Express Rate Limit**: Rate limiting middleware
- **Morgan**: HTTP request logger
- **Compression**: Gzip compression middleware
- **JSON Web Token**: Authentication tokens

### Development Tools
- **ESLint**: Code linting v√† style checking
- **Prettier**: Code formatting
- **Nodemon**: Auto-restart trong development
- **PM2**: Process manager cho production

### Utilities
- **Lodash**: JavaScript utility library
- **Axios**: HTTP client
- **dotenv**: Environment variables management
- **Signale**: Elegant console logger

## üìÅ C·∫•u tr√∫c d·ª± √°n

```
ai-backend/
‚îú‚îÄ‚îÄ app/                              # Th∆∞ m·ª•c ch√≠nh c·ªßa ·ª©ng d·ª•ng
‚îÇ   ‚îú‚îÄ‚îÄ src/                          # Source code
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.ts                   # Entry point c·ªßa ·ª©ng d·ª•ng
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.ts                    # Express app configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ configs/                  # C·∫•u h√¨nh ·ª©ng d·ª•ng
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.config.ts      # C·∫•u h√¨nh server
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ constants/                # H·∫±ng s·ªë v√† constants
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ response.constant.ts  # Response constants
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/              # Controller layer (MVC)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.controller.ts   # Order business logic
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.controller.ts # Product business logic
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.controller.ts    # User business logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/                     # Core utilities
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.core.ts      # Database connection
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.core.ts        # Logging utility
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ response.core.ts      # Response helper
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middlewares/              # Express middlewares
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.middleware.ts    # Authentication middleware
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ error.middleware.ts   # Error handling
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ limiter.middleware.ts # Rate limiting
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/             # Data access layer
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.repository.ts   # Order data operations
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.repository.ts # Product data operations
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.repository.ts    # User data operations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/                   # API routes
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts              # Main router
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ v1/                   # API version 1
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts          # V1 router
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.route.ts    # Order endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.route.ts  # Product endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.route.ts     # User endpoints
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v2/                   # API version 2
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.ts          # V2 router
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/                 # Business logic layer
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ order.service.ts      # Order business logic
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.service.ts    # Product business logic
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.service.ts       # User business logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/                    # TypeScript type definitions
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common/               # Common types
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.types.ts   # Configuration types
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ document.types.ts # Document types
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ response.types.ts # Response types
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dtos/                 # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ index.ts          # DTO exports
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ order.dto.ts      # Order DTOs
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ product.dto.ts    # Product DTOs
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ user.dto.ts       # User DTOs
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/                    # Utility functions
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ async-wrapper.util.ts # Async error wrapper
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sample/                   # Sample data
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.ts               # Database seeding
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ public/                   # Static assets
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ favicon.png           # Application favicon
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logs/                     # Application logs
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ app.log               # Main log file
‚îÇ   ‚îú‚îÄ‚îÄ prisma/                       # Prisma ORM configuration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma             # Database schema
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ migrations/               # Database migrations
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ migration_lock.toml   # Migration lock
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ 20251003075216_init/  # Initial migration
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ migration.sql     # SQL migration file
‚îÇ   ‚îú‚îÄ‚îÄ package.json                  # Dependencies v√† scripts
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json                 # TypeScript configuration
‚îÇ   ‚îú‚îÄ‚îÄ eslint.config.js              # ESLint configuration
‚îÇ   ‚îú‚îÄ‚îÄ nodemon.json                  # Nodemon configuration
‚îÇ   ‚îî‚îÄ‚îÄ ecosystem.config.js           # PM2 configuration
‚îú‚îÄ‚îÄ postgres/                         # PostgreSQL Docker setup
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml            # Docker Compose config
‚îÇ   ‚îî‚îÄ‚îÄ postgresql.conf               # PostgreSQL configuration
‚îî‚îÄ‚îÄ docs/                            # API Documentation
    ‚îú‚îÄ‚îÄ openapi.json                 # OpenAPI specification (JSON)
    ‚îú‚îÄ‚îÄ openapi.yaml                 # OpenAPI specification (YAML)
    ‚îî‚îÄ‚îÄ postman.json                 # Postman collection
```

## üóÑÔ∏è Database Schema

D·ª± √°n s·ª≠ d·ª•ng **PostgreSQL** v·ªõi **3 b·∫£ng ch√≠nh**:

### üë§ Users
- `id`: Primary key (auto increment)
- `name`: T√™n ng∆∞·ªùi d√πng
- `created_at`, `updated_at`: Timestamps

### üì¶ Products
- `id`: Primary key (auto increment)
- `name`: T√™n s·∫£n ph·∫©m
- `unit`: ƒê∆°n v·ªã t√≠nh
- `origin`: Xu·∫•t x·ª©
- `note`: Ghi ch√∫ (optional)
- `is_active`: Tr·∫°ng th√°i ho·∫°t ƒë·ªông
- `created_at`, `updated_at`: Timestamps

### üìã Orders
- `id`: Primary key (auto increment)
- `user_id`: Foreign key ‚Üí Users
- `product_id`: Foreign key ‚Üí Products
- `quantity`: S·ªë l∆∞·ª£ng
- `purpose`: M·ª•c ƒë√≠ch s·ª≠ d·ª•ng (optional)
- `created_at`, `updated_at`: Timestamps

## üöÄ C√†i ƒë·∫∑t v√† ch·∫°y d·ª± √°n

### Y√™u c·∫ßu h·ªá th·ªëng
- **Node.js** >= 18.0.0
- **npm** ho·∫∑c **yarn**
- **PostgreSQL** >= 16
- **Docker** & **Docker Compose** (optional)

### 1. Clone repository
```bash
git clone https://github.com/MeadowPham2506/ai-backend.git
cd ai-backend
```

### 2. C√†i ƒë·∫∑t dependencies
```bash
cd app
npm install
# ho·∫∑c
yarn install
```

### 3. Thi·∫øt l·∫≠p c∆° s·ªü d·ªØ li·ªáu

#### Option A: S·ª≠ d·ª•ng Docker (Khuy·∫øn ngh·ªã)
```bash
cd ../postgres
docker-compose up -d
```

#### Option B: PostgreSQL local
T·∫°o database local v√† c·∫≠p nh·∫≠t connection string trong `.env`

### 4. C·∫•u h√¨nh m√¥i tr∆∞·ªùng
T·∫°o file `.env` trong th∆∞ m·ª•c `app/`:
```env
# Database
PRISMA_DATABASE_URL="postgresql://postgres:postgres123@localhost:5432/production_db"

# Server
PORT=3000
NODE_ENV=development

# JWT (n·∫øu s·ª≠ d·ª•ng authentication)
JWT_SECRET=your-secret-key
```

### 5. Ch·∫°y migration
```bash
cd app
npx prisma migrate dev
```

### 6. Seed d·ªØ li·ªáu m·∫´u (optional)
```bash
npm run seed
```

### 7. Kh·ªüi ƒë·ªông server

#### Development mode
```bash
npm run dev
```

#### Production mode
```bash
npm run build
npm start
```

#### S·ª≠ d·ª•ng PM2
```bash
npm install -g pm2
pm2 start ecosystem.config.js
```

Server s·∫Ω ch·∫°y t·∫°i: `http://localhost:3000`

## üìö API Documentation

### Base URL
```
http://localhost:3000/api/v1
```

### Endpoints ch√≠nh

#### üë§ Users
- `GET /api/v1/users` - L·∫•y danh s√°ch users
- `POST /api/v1/users` - T·∫°o user m·ªõi
- `GET /api/v1/users/:id` - L·∫•y th√¥ng tin user
- `PUT /api/v1/users/:id` - C·∫≠p nh·∫≠t user
- `DELETE /api/v1/users/:id` - X√≥a user

#### üì¶ Products
- `GET /api/v1/products` - L·∫•y danh s√°ch s·∫£n ph·∫©m
- `POST /api/v1/products` - T·∫°o s·∫£n ph·∫©m m·ªõi
- `GET /api/v1/products/:id` - L·∫•y th√¥ng tin s·∫£n ph·∫©m
- `PUT /api/v1/products/:id` - C·∫≠p nh·∫≠t s·∫£n ph·∫©m
- `DELETE /api/v1/products/:id` - X√≥a s·∫£n ph·∫©m

#### üìã Orders
- `GET /api/v1/orders` - L·∫•y danh s√°ch ƒë∆°n h√†ng
- `POST /api/v1/orders` - T·∫°o ƒë∆°n h√†ng m·ªõi
- `GET /api/v1/orders/:id` - L·∫•y th√¥ng tin ƒë∆°n h√†ng
- `PUT /api/v1/orders/:id` - C·∫≠p nh·∫≠t ƒë∆°n h√†ng
- `DELETE /api/v1/orders/:id` - X√≥a ƒë∆°n h√†ng

### üìÑ T√†i li·ªáu API chi ti·∫øt
- **OpenAPI Spec**: `/docs/openapi.yaml`
- **Postman Collection**: `/docs/postman.json`

## üß™ Scripts NPM

```bash
# Development
npm run dev          # Ch·∫°y server v·ªõi hot reload
npm run build        # Build TypeScript to JavaScript
npm start            # Ch·∫°y production server

# Code Quality
npm run lint         # Ch·∫°y ESLint
npm run format       # Format code v·ªõi Prettier

# Database
npm run seed         # Seed d·ªØ li·ªáu m·∫´u
npx prisma studio    # M·ªü Prisma Studio
npx prisma generate  # Generate Prisma client
```

## üîß C·∫•u h√¨nh

### TypeScript
- `tsconfig.json`: TypeScript configuration
- Path aliases ƒë∆∞·ª£c thi·∫øt l·∫≠p (`@src/*`)

### ESLint & Prettier
- `eslint.config.js`: ESLint rules
- Code formatting t·ª± ƒë·ªông v·ªõi Prettier

### PM2 (Production)
- `ecosystem.config.js`: PM2 process configuration
- Memory limit: 4GB
- Auto restart: enabled

## üõ°Ô∏è Security Features

- **Helmet**: Security headers protection
- **CORS**: Cross-origin resource sharing control
- **Rate Limiting**: API rate limiting middleware
- **Input Validation**: Request validation v·ªõi DTOs
- **JWT Authentication**: Token-based authentication
- **Error Handling**: Centralized error management

## üìä Monitoring & Logging

- **Morgan**: HTTP request logging
- **Signale**: Elegant console logging
- **Log Files**: Automatic log rotation
- **Health Checks**: Database connection monitoring

## üê≥ Docker Support

### PostgreSQL Container
```bash
cd postgres
docker-compose up -d
```

### Environment Variables
- `POSTGRES_USER`: Database user
- `POSTGRES_PASSWORD`: Database password
- `POSTGRES_DB`: Database name

## ü§ù Contributing

1. Fork repository
2. T·∫°o feature branch (`git checkout -b feature/amazing-feature`)
3. Commit changes (`git commit -m 'Add some amazing feature'`)
4. Push to branch (`git push origin feature/amazing-feature`)
5. T·∫°o Pull Request

## üìù License

Distributed under the MIT License. See `LICENSE` for more information.

## üë®‚Äçüíª Author

**ThanhPH** - [MeadowPham2506](https://github.com/MeadowPham2506)

## üìû Li√™n h·ªá

- GitHub: [@MeadowPham2506](https://github.com/MeadowPham2506)
- Email: thanhph2k3@example.com

---

‚≠ê N·∫øu d·ª± √°n n√†y h·ªØu √≠ch, h√£y cho m·ªôt star nh√©!
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ response.constant.ts # HTTP response constants
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/         # Request handlers
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ category.controller.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.controller.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.controller.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ core/                # Core modules
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.core.ts # Database connection
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.core.ts   # Logging configuration
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ response.core.ts # API response classes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middlewares/         # Express middlewares
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ error.middleware.ts   # Error handling
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ limiter.middleware.ts # Rate limiting
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ repositories/        # Data access layer
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ category.repository.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.repository.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.repository.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/              # API routes
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ v1/             # API version 1
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v2/             # API version 2
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/            # Business logic layer
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ category.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ user.service.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/               # TypeScript type definitions
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.d.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ document.d.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ global.d.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dtos/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/               # Utility functions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ public/              # Static files
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ favicon.png
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ generated/           # Prisma generated files
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prisma/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logs/                # Application logs
‚îÇ   ‚îú‚îÄ‚îÄ prisma/                  # Prisma schema
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma       # Database schema definition
‚îÇ   ‚îú‚îÄ‚îÄ logs/                    # Log files
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.log
‚îÇ   ‚îú‚îÄ‚îÄ package.json            # Dependencies v√† scripts
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json           # TypeScript configuration
‚îÇ   ‚îú‚îÄ‚îÄ eslint.config.js        # ESLint configuration
‚îÇ   ‚îú‚îÄ‚îÄ nodemon.json            # Nodemon configuration
‚îÇ   ‚îî‚îÄ‚îÄ ecosystem.config.js     # PM2 configuration
‚îú‚îÄ‚îÄ postgres/                    # PostgreSQL Docker setup
‚îÇ   ‚îú‚îÄ‚îÄ docker-compose.yml      # Docker compose configuration
‚îÇ   ‚îî‚îÄ‚îÄ postgresql.conf         # PostgreSQL configuration
‚îî‚îÄ‚îÄ docs/                       # Documentation
```

## üóÑÔ∏è Database Schema

D·ª± √°n s·ª≠ d·ª•ng PostgreSQL v·ªõi Prisma ORM. Database schema bao g·ªìm:

### Categories Table
```sql
- id: Int (Primary Key, Auto increment)
- name: String (Unique)
- parent_id: Int (Optional, Foreign Key to self)
- parent: Category relation (Self-reference)
- children: Category[] relation (One-to-many)
- products: Product[] relation (One-to-many)
```

### Products Table
```sql
- id: Int (Primary Key, Auto increment)
- category_id: Int (Foreign Key to categories)
- name: String
- unit: String (Optional)
- origin: String (Optional)
- is_active: Boolean (Default: true)
- category: Category relation (Many-to-one)
```

## üõ†Ô∏è Ki·∫øn tr√∫c ·ª©ng d·ª•ng

### Layered Architecture
D·ª± √°n ƒë∆∞·ª£c thi·∫øt k·∫ø theo m√¥ h√¨nh 4 l·ªõp:

1. **Controller Layer**: X·ª≠ l√Ω HTTP requests/responses
2. **Service Layer**: Business logic v√† validation
3. **Repository Layer**: Data access v√† database operations
4. **Core Layer**: Shared utilities v√† configurations

### Key Features

#### üîê Security Middleware
- **Helmet**: Thi·∫øt l·∫≠p security headers
- **CORS**: C·∫•u h√¨nh cross-origin requests
- **Rate Limiting**: Gi·ªõi h·∫°n s·ªë requests t·ª´ client
- **Error Handling**: Centralized error handling

#### üìù Logging System
- **Morgan**: HTTP request logging
- **Signale**: Structured application logging
- **File Logging**: Logs ƒë∆∞·ª£c l∆∞u v√†o files

#### üö¶ API Response System
- **Standardized Responses**: Unified API response format
- **Error Handling**: Custom error classes
- **HTTP Status Codes**: Comprehensive status code constants

#### ‚öôÔ∏è Configuration Management
- **Environment Variables**: `.env` file support
- **Type-safe Config**: TypeScript interfaces cho configuration
- **Server Configuration**: Centralized server settings

## üì¶ Available Scripts

```bash
# Development
npm run dev          # Start development server v·ªõi hot reload

# Production
npm run build        # Build TypeScript to JavaScript
npm run start        # Start production server

# Code Quality
npm run lint         # Run ESLint
npm run format       # Format code v·ªõi Prettier

# Process Management (PM2)
pm2 start ecosystem.config.js    # Start v·ªõi PM2
pm2 stop ai-backend             # Stop application
pm2 restart ai-backend          # Restart application
```

## üöÄ C√†i ƒë·∫∑t v√† ch·∫°y d·ª± √°n

### Y√™u c·∫ßu h·ªá th·ªëng
- **Node.js**: >= 16.x
- **npm/yarn**: Package manager
- **Docker**: Cho PostgreSQL (optional)
- **PostgreSQL**: >= 13.x (n·∫øu kh√¥ng d√πng Docker)

### 1. Clone repository
```bash
git clone <repository-url>
cd ai-backend
```

### 2. C√†i ƒë·∫∑t dependencies
```bash
cd app
npm install
# ho·∫∑c
yarn install
```

### 3. Thi·∫øt l·∫≠p Database
#### S·ª≠ d·ª•ng Docker (Recommended)
```bash
cd postgres
docker-compose up -d
```

### 4. C·∫•u h√¨nh Environment Variables
T·∫°o file `.env` trong th∆∞ m·ª•c `app/`:
```env
NODE_ENV=development
SERVER_PORT=8080
PRISMA_DATABASE_URL="postgresql://postgres:postgres123@localhost:5432/production_db"
LIMITER_MAX_REQUESTS=100
LIMITER_WINDOW_MS=15
```

### 5. Ch·∫°y Prisma migrations
```bash
cd app
npx prisma generate
npx prisma db push
```

### 6. Kh·ªüi ƒë·ªông ·ª©ng d·ª•ng

#### Development mode
```bash
npm run dev
```

#### Production mode
```bash
npm run build
npm run start
```

## üîß Configuration

### Server Configuration
File: `src/configs/server.config.ts`
- **Environment**: development/production
- **Port**: Server port (default: 8080)
- **Rate Limiting**: Request limits v√† time windows

### Database Configuration
File: `prisma/schema.prisma`
- **Provider**: PostgreSQL
- **Client Generation**: Custom output path
- **Database URL**: From environment variables

### TypeScript Configuration
File: `tsconfig.json`
- **Target**: ES2020
- **Module**: CommonJS
- **Path Mapping**: `@src/*` alias
- **Type Checking**: Strict mode

## üìä Monitoring & Logging

### Application Logs
- **Location**: `app/logs/app.log`
- **Format**: Combined format v·ªõi timestamps
- **Rotation**: Automatic log rotation

### Process Monitoring
- **PM2**: Production process management
- **Health Checks**: Database connection monitoring
- **Memory Limits**: 4GB max memory per process

## üîÑ Development Workflow

### Code Quality
1. **ESLint**: Automated linting
2. **Prettier**: Code formatting
3. **TypeScript**: Type checking
4. **Hot Reload**: Nodemon cho development

### Database Workflow
1. **Schema First**: Design trong `schema.prisma`
2. **Code Generation**: Prisma client auto-generation
3. **Migrations**: Database migrations
4. **Type Safety**: Generated types cho database operations

## ü§ù Contributing

1. Fork repository
2. T·∫°o feature branch
3. Commit changes v·ªõi clear messages
4. Run tests v√† linting
5. Submit pull request

## üìù License

MIT License - Xem file LICENSE ƒë·ªÉ bi·∫øt th√™m chi ti·∫øt.

## üë®‚Äçüíª Author

**ThanhPH** - Initial work v√† maintenance

---

*D·ª± √°n n√†y ƒëang trong giai ƒëo·∫°n ph√°t tri·ªÉn. C√°c controllers, services, v√† repositories hi·ªán t·∫°i ƒëang ƒë∆∞·ª£c x√¢y d·ª±ng.*